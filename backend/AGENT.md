# AGENTS.md — 이거챙겨 작업 협약

## 목표
- `REQUIREMENTS.md`에 정의된 기대 동작을 깨지 않으면서 MVP를 구현한다.
- 코드 변경은 “동작 유지 + 검증 가능”을 우선한다.

## Hard Constraints (반드시 지켜야 함)
- `api`는 `domain service`만 호출한다.
- 외부 API 호출(기상청/FCM 등)은 `infra`에만 위치한다.
- `domain -> infra` 직접 의존은 금지한다.
- 추천 핵심 로직은 반드시 `domain.recommendation`에 위치한다.
- AI는 `domain` 내부 보조 역할만 허용한다(문구/이유 생성).
    - 금지: 점수 계산 / 날씨 판단 / 민감도 계산 / 스케줄링 제어
- 테스트 코드 작성 시, given/when/then 구조를 유지한다.

## Non-goals (구현 금지)
- 로그인/OAuth/JWT
- `domain`에서 외부 API 직접 호출

## Work Protocol (에이전트가 지켜야 하는 작업 방식)

### 1) 추측 금지: 근거 우선
- 확신이 없으면 가정하지 말고 관련 파일/설정/테스트/로그를 먼저 열어 근거를 확보한다.
- 최종 설명에는 근거가 된 파일 경로를 명시한다(가능하면 핵심 변경 지점도 함께).

### 2) 기본 루프: 검색 → 수정 → 검증 → 보고
- 먼저 검색으로 관련 파일과 엔트리포인트를 찾는다.
- 변경은 “한 번에 이해 가능한 묶음”으로 하고 불필요한 잔수정 반복을 피한다.
- 변경 후에는 레포에 존재하는 검증 커맨드(테스트/린트/타입체크/빌드)를 가능한 범위에서 실행한다.
- 마지막에 diff 중심으로 결과를 보고한다(아래 3번).

### 3) 결과 보고는 PR 리뷰처럼(diff 중심)
최종 메시지에 아래를 포함한다.
- 변경 파일 목록(경로)
- 핵심 변경 요약(어디를/왜/어떻게)
- 리스크/사이드이펙트(깨질 수 있는 부분)
- 롤백 방법(안전하게 되돌리는 방법)

## Definition of Done
- 레이어 규칙 위반 없음(`domain -> infra` 금지)
- 동작 스펙 문서의 기대 동작 유지
- 레포 기준 검증 커맨드가 통과함(가능한 범위에서)
